@page "/"

@using Conservices.Status.Core.Models
@using Conservices.Status.Services.Interfaces
@inject IApiResponseService ApiResponseService

<MudGrid AlignItems="AlignItems.Center">
    <MudItem xs="4">
        <MudCard Style="width: 100%; height: 400px">
            <MudCardHeader>
                <MudStack AlignItems="AlignItems.Center" Style="width: 100%">
                    <MudText Typo="Typo.h6">API Response Time (Conservices.de)</MudText>
                    <MudDivider FlexItem="false"></MudDivider>
                </MudStack>
            </MudCardHeader>
            <MudCardContent>
                <ApexChart TItem="ApiResponseResult">
                    <ApexPointSeries 
                        TItem="ApiResponseResult" 
                        Items="ApiResponseService.ApiResponsesConservices"
                        SeriesType="SeriesType.Line"
                        XValue="x => x.ResponseDateString"
                        YValue="x => x.ResponseTimeMs">
                    </ApexPointSeries>
                </ApexChart>
            </MudCardContent>
        </MudCard>
    </MudItem>
    <MudItem xs="4">
        <MudCard Style="width: 100%; height: 400px">
            <MudCardHeader>
                <MudStack AlignItems="AlignItems.Center" Style="width: 100%">
                    <MudText Typo="Typo.h6">API Response Time (connect.conservices.de)</MudText>
                    <MudDivider FlexItem="false"></MudDivider>
                </MudStack>
            </MudCardHeader>
            <MudCardContent>
                <ApexChart TItem="ApiResponseResult">
                    <ApexPointSeries
                        TItem="ApiResponseResult"
                        Items="ApiResponseService.ApiResponsesConnect"
                        SeriesType="SeriesType.Line"
                        XValue="x => x.ResponseDateString"
                        YValue="x => x.ResponseTimeMs">
                    </ApexPointSeries>
                </ApexChart>
            </MudCardContent>
        </MudCard>
    </MudItem>
</MudGrid>

@code {

    protected override async Task OnInitializedAsync()
    {
        await InvokeAsync(StateHasChanged);
    }

}